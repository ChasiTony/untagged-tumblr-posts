var API_KEY="ii4TLRjfMoszcoDkrxBKUk5isHgx0ezQnJ8JWGntYIboVVigez",untagged_total=0,queryParams=function(e){if(""==e)return{};for(var t={},n=0;n<e.length;++n){var s=e[n].split("=",2);t[s[0]]=1==s.length?"":decodeURIComponent(s[1].replace(/\+/g," ")).replace(/\//g,"")}return t}(window.location.search.substr(1).split("&")),normalise_url=function(e){return e=e.replace(/^http[s]{0,}:\/\//g,""),e=e.replace(/\/$/g,"")},API_URL="http://api.tumblr.com/v2/blog/"+normalise_url(queryParams.hostname)+"/posts";if(queryParams.include_reblogs)var is_untagged=function(e){return!e.tags.length};else var is_untagged=function(e){return!e.tags.length&&!e.hasOwnProperty("reblogged_root_id")};var optionString=function(e,t,n){var s='Getting untagged posts for <span class="option">'+e+"</span> which ";if(s+='<span class="option">',s+=t?"include":"exclude",s+="</span> reblogs","all"==n)return s+".";switch(s+=' and only includes <span class="option">',n){case"text":case"photo":case"link":case"chat":case"audio":case"answer":s+=n+" posts";break;case"quote":case"video":s+=n+"s"}return s+"</span>."},makeRequest=function(e,t,n,s){var o={reblog_info:"true",api_key:API_KEY};e>0&&(o.offset=e),"all"!=n&&(o.type=n),$.ajax({url:API_URL,data:o,callback:"JSON_CALLBACK",dataType:"jsonp",success:function(o){s(o,e,t,n)}})},update_page=function(e,t,n,s){for(var o in e.response.posts){var a=e.response.posts[o];is_untagged(a)&&(untagged_total+=1,document.getElementById("posts").innerHTML+='<li><a href="'+a.post_url+'">'+a.post_url+"</a></li>")}document.getElementById("untagged_total").innerHTML=untagged_total,n>t?(document.getElementById("offset").innerHTML=t,getPosts(t+20,n,s)):(document.getElementById("first_response").innerHTML="",document.getElementById("status").innerHTML="<p>Iâ€™ve finished looking, and I found "+untagged_total+" untagged posts.</p>")},getPosts=function(e,t,n){makeRequest(e,t,n,update_page)},initial_success=function(e,t,n,s){if(200===e.meta.status){document.getElementById("first_response").innerHTML="<p>I found your blog! Searching for untagged posts:";var o='<p>Looked through <span id="offset">0</span> of '+e.response.total_posts+" total post";1!=e.response.total_posts&&(o+="s"),o+=': (found <span id="untagged_total">0</span> untagged posts)</p>',document.getElementById("status").innerHTML=o,getPosts(0,e.response.total_posts,s)}else document.getElementById("first_response").innerHTML="<p>I tried to look up your </p>"};